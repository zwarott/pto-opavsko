# Překážky těžkého opevnění na Opavsku

Projekt se zaměřuje na vektorizaci průběhu překážek těžkého opevnění
v úseku ŽSV (Ženijní skupinové velitelství) IV. Opava, a to konkrétně 
kolem srubů stavebního úseku Opava (OP-S).

## Členění řešeného území
| Úsek          | Podúsek      | Srub                     |
| --------------|------------- | -------------------------|
| ŽSV IV. Opava | Malé Hoštice | OP-S 06 Na Zbytkovém     |
| ŽSV IV. Opava | Malé Hoštice | OP-S 09 Na Lukách        |
| ŽSV IV. Opava | Malé Hoštice | OP-S 10 Na Křižovatce    |
| ŽSV IV. Opava | Malé Hoštice | OP-S 11 U cihelny        |
| ŽSV IV. Opava | Malé Hoštice | OP-S 12 Na rytířském     |
| ŽSV IV. Opava | Malé Hoštice | OP-S 13 U pískovny       |
| ŽSV IV. Opava | Malé Hoštice | OP-S 14 U obrázku        |
| ŽSV IV. Opava | Malé Hoštice | OP-S 15 U kruhovky       |
| ŽSV IV. Opava | Jaktař       | OP-S 16 Na středním poli |
| ŽSV IV. Opava | Jaktař       | OP-S 17 Nad silnicí      |
| ŽSV IV. Opava | Jaktař       | OP-S 18 U sádrovce       |
| ŽSV IV. Opava | Jaktař       | OP-S 19 U finanční budky |
| ŽSV IV. Opava | Jaktař       | OP-S 20 Na střelnici     |
| ŽSV IV. Opava | Jaktař       | OP-S 21 Na cvičišti      | 
| ŽSV IV. Opava | Jaktař       | OP-S 22 Nad úvozem       | 
| ŽSV IV. Opava | Jaktař       | OP-S 23 Nad potokem      | 
| ŽSV IV. Opava | Jaktař       | OP-S 24 Na Gelově poli   | 
| ŽSV IV. Opava | Milostovice  | OP-S 25 U trigonometru   | 
| ŽSV IV. Opava | Milostovice  | OP-S 26 U Milostovic     | 
| ŽSV IV. Opava | Milostovice  | OP-S 27 Paletovo pole    | 
| ŽSV IV. Opava | Milostovice  | OP-S 28 Mezicestí        | 
| ŽSV IV. Opava | Milostovice  | OP-S 29 Rozcestí         | 
| ŽSV IV. Opava | Šibenice     | OP-S 30 Šibenice         | 
| ŽSV IV. Opava | Šibenice     | OP-S 31 U cesty          | 
| ŽSV IV. Opava | Šibenice     | OP-S 32 Kopaniny         | 
| ŽSV IV. Opava | Šibenice     | OP-S 36a Horní Dvoják    | 
| ŽSV IV. Opava | Šibenice     | OP-S 36b Dolní Dvoják    | 

## Podklady
### Archivní letecké meřické snímky
| OP-S | Rok pořízení | Kód snímku |
|------|--------------|------------|
| 06   | 1946         | OPAV54     |
| 09   | 1946         | OPAV74     |
| 10   | 1946         | OPAV74     |
| 11   | 1946         | OPAV73     |
| 12   | 1946         | OPAV73     |
| 13   | 1946         | OPAV73     |
| 14   | 1946         | OPAV73     |
| 15   | 1946         | OPAV73     |
| 16   | 1946         | OPAV83     |
| 17   | 1946         | OPAV83     |
| 18   | 1946         | OPAV83     |
| 19   | 1946         | OPAV93     |
| 20   | 1946         | OPAV93     |
| 21   | 1946         | OPAV93     |
| 22   | 1946         | OPAV93     |
| 23   | 1946         | HBEN02     |
| 24   | 1946         | HBEN02     |
| 25   | 1946         | HBEN02     |
| 26   | 1946         | HBEN02     |
| 27   | 1946         | HBEN02     |
| 28   | 1946         | HBEN12     |
| 29   | 1946         | HBEN12     |
| 30   | 1955         | HBEN12     |
| 31   | 1955         | HBEN12     |
| 32   | 1955         | HBEN21     |
| 36a  | 1955         | HBEN21     |
| 36b  | 1955         | HBEN21     |

### Stavební výkresy ŽSV IV. Opava
| OP-S | Pořízeno   | Měřítko   |
|------|------------|-----------|
| 06   | 19.08.1937 | 1 : 2 880 | 
| 09   | 19.08.1937 | 1 : 2 500 |
| 10   | 19.08.1937 | 1 : 2 500 |
| 11   | 19.08.1937 | 1 : 2 500 | 
| 12   | 19.08.1937 | 1 : 2 500 |
| 13   | 19.08.1937 | 1 : 2 880 |
| 14   | 19.08.1937 | 1 : 2 880 |
| 15   | 19.08.1937 | 1 : 2 880 |
| 16   | 19.08.1937 | 1 : 2 880 |
| 17   | 19.08.1937 | 1 : 2 880 |
| 18   | 19.08.1937 | 1 : 2 880 |
| 19   | 19.08.1937 | 1 : 2 880 |
| 20   | 19.08.1937 | 1 : 2 880 |
| 21   | 19.08.1937 | 1 : 2 880 |
| 22   | 19.08.1937 | 1 : 2 880 |
| 23   | -          | -         |
| 24   | 23.08.1937 | 1 : 2 500 |
| 25   | 23.08.1937 | 1 : 2 500 |
| 26   | -          | -         |
| 27   | 23.08.1937 | 1 : 2 500 |
| 28   | 23.08.1937 | 1 : 2 500 |
| 29   | 23.08.1937 | 1 : 2 500 |
| 30   | 23.08.1937 | 1 : 2 500 |
| 31   | neuvedeno  | neuvedeno |
| 31   | neuvedeno  | neuvedeno |

### Vyúčtovací plány ŽSV IV. Opava 
| OP-S | Pořízeno    | Měřítko   |
|------|-------------|-----------|
| 06   | 16.06.1938? | 1 : 2 880 | 
| 09   | 16.06.1938? | 1 : 2 500 | 
| 10   | 16.06.1938? | 1 : 2 500 | 
| 11   | 16.06.1938? | 1 : 2 500 | 
| 12   | 16.06.1938? | 1 : 2 500 | 
| 13   | 16.06.1938? | 1 : 2 880 | 
| 14   | 16.06.1938? | 1 : 2 880 | 
| 15   | 16.06.1938? | 1 : 2 880 | 
| 16   | 16.06.1938? | 1 : 2 880 | 
| 17   | 16.06.1938? | 1 : 2 880 | 
| 18   | 16.06.1938? | 1 : 2 880 | 
| 19   | 16.06.1938? | 1 : 2 880 | 
| 20   | 16.06.1938? | 1 : 2 880 | 
| 21   | 16.06.1938? | 1 : 2 880 | 
| 22   | 16.06.1938? | 1 : 2 880 | 
| 23   | 16.06.1938? | 1 : 2 880 | 
| 24   | 16.06.1938? | 1 : 2 500 | 
| 25   | 16.06.1938? | 1 : 2 500 | 
| 26   | 16.06.1938? | 1 : 2 500 | 
| 27   | 16.06.1938? | 1 : 2 500 | 
| 28   | 16.06.1938? | 1 : 2 500 | 
| 29   | 16.06.1938? | 1 : 2 880 | 
| 30   | 16.06.1938? | 1 : 2 880 | 
| 31   | 16.06.1938? | 1 : 2 880 | 
| 32   | 16.06.1938? | 1 : 2 880 | 
| 36a  | 16.06.1938? | 1 : 2 880 | 
| 36b  | 16.06.1938? | 1 : 2 880 | 

### Československé mapové listy v měřítku 1:75000
| Kód  | Název            | Vydáno  |
|------|------------------|---------|
| 3959 | Krnov            | 06.1938 | 
| 3960 | Sudice           | 05.1938 |
| 4059 | Bruntál          | 05.1938 |
| 4060 | Moravská Ostrava | 09.1938 |

### Neměcké mapové listy - Befestigungskarte Tschechoslowakei v měřítku 1:75000 
| Kód  | Název      | Vydáno   | Přítisk     |
|------|------------|----------|-------------|
| 3959 | Troplowitz | 08.1938? | 15.07.1938  |
| 3960 | Ratibor    | 02.1938? | 15.07.1938  |
| 4059 | Bruntál    | 02.1938? | 15.07.1938  |
| 4060 | Hultschin  | 02.1938? | 15.07.1938  |


- DMR 5G
- Archivní fotodokumentace
- Měření a fotodokumentace z terénu
- Schémata a profily jednotlivých kategorií překážek
- Kniha Tvrze československého opevnění 1935-1938 II.


## Postup prací
### Georeferencování
### Analýza dobových fotografií
### Vektorizace
### Zálohování databáze
Databáze je zálohována a následně šifrována za pomocí [**GNU Privacy Guard**](https://www.gnupg.org/software/index.html).

Po spuštění skriptu v terminálu `python ./database/backup/run_backup_encrypt.py` je uživatel vyzván k zadání hesla pro účely šifrování.
Následně potvrdí nově zvolené heslo. Pokud je databáze zabezpečena heslem, tak je nutné zadat i toto heslo. 

Šifrovanou databázi lze dešifrována příkazem v terminálu `gpg --output output_file.sql --decrypt input_file.sql.gpg`, kde `output_file.sql`
reprezentuje dešifrovanou databázi, zatímco `input_file.sql.gpg` představuje vstupní, zašifrovanou databázi.

<img src="./docs_images/encrypt_database.png" alt="Encrypt database in terminal" style="width:400px;height:100px;"/>


## Databáze
### Struktura databáze
```
pto_opavsko
├── audit
│   ├── centroidy_atlas_history
│   ├── csr_pred_zaborem_history
│   ├── geodeticke_zamereni_history
│   ├── mrizka_m2000_history
│   ├── palebne_zvony_history
│   ├── pomocne_linie_history
│   ├── pozice_srubu_main_history
│   ├── pozice_srubu_overview_history
│   ├── pozorovatel_pohled_history
│   ├── pozorovatel_pozice_history
│   ├── prekazky_buffer_50m_history
│   ├── prekazky_linie_history
│   ├── prubeh_prekazek_history
│   └── sruby_ruian_history
│
├── detail
│   ├── geodeticke_zamereni
│   ├── schema_body
│   ├── schema_koty
│   ├── schema_linie
│   └── schema_useky
│
├── lookups
│   ├── kat_vp_lookup
│   ├── katastr_lookup
│   ├── kategorie_lookup
│   ├── ops_lookup
│   ├── podusek_lookup
│   ├── srub_nazev_lookup
│   ├── srub_typ_lookup
│   ├── stav_lookup
│   └── usek_lookup
│
├── main
│   ├── centroidy_atlas
│   ├── delici_linie_gen
│   ├── hranice_cr
│   ├── mrizka_m2000
│   ├── palebne_zvony
│   ├── pomocne_linie
│   ├── pozice_srubu_main
│   ├── pozorovatel_pohled
│   ├── pozorovatel_pozice
│   ├── prekazky_agregovane
│   ├── prekazky_buffer_50m
│   ├── prekazky_gen
│   ├── prekazky_linie
│   ├── prekazky_test
│   ├── qgis_projects
│   └── sruby_ruian
│
├── overview_13kk
│   ├── csr_pred_zaborem
│   └── csr_pred_zaborem_label
│
├── overview_75k
│   ├── buffered_400m
│   ├── ipenky
│   ├── pozice_srubu_overview
│   └── prubeh_prekazek
│
└── public
    ├── geography_columns
    ├── geometry_columns
    ├── layer_styles
    └── spatial_ref_sys
```

**Schéma** `audit` 
Audit schéma obsahuje tabulky, které zaznamenávají změny při editace (geometrie + další informativní údaje).

Příklad: 
Tabulka `audit.centroidy_atlas_history` trasuje změny v hlavní tabulce `main.centroidy_atlas`.

**Schéma** `detail` 

**Schéma** `lookups` 

**Schéma** `main` 

**Schéma** `overview_13kk` 

**Schéma** `overview_75k` 

**Schéma** `public` 


### Export stylů do databazáze
V prostředí QGIS lze vyexportovat styly níže uvedeným postupem:
`Layer Properties` > `Export` > `Save as QGIS Layer Style File`.
Po vyexportování bude styl propojen s odpovídající vrstvou (tabulkou v databázi).

<img src="./docs_images/qgis_save_layer_style.png" alt="Save Layer Style" style="width:300px;height:400px;"/>



## Výstupy
### Atlas I. Generalizovaný průběh
### Atlas II. Detailní průběh
